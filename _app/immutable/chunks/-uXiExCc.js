import{a as _}from"./Cnkeo4Xv.js";import{a1 as a,h as r,M as o,a3 as l}from"./C_XARtSV.js";import{t as b,o as k,v as d}from"./C8zYL8rv.js";import{p as z}from"./DdlUnTNn.js";const E=i=>i!=null&&typeof i.then=="function",g=Object.freeze({});class v{#e=a(0);get width(){return r(this.#e)}set width(e){o(this.#e,e,!0)}#t=a(0);get height(){return r(this.#t)}set height(e){o(this.#t,e,!0)}}const T=(i,e=z.url.origin)=>{const t=b(e,"/");if(i===e||i===t)return"/";const s=k(i,t);return s===i?i:"/"+s};class O{is_menu=!1;menu;run;disabled;#e=a(!1);get selected(){return r(this.#e)}set selected(e){o(this.#e,e,!0)}#t=a(!1);get pending(){return r(this.#t)}set pending(e){o(this.#t,e,!0)}#s=a(null);get error_message(){return r(this.#s)}set error_message(e){o(this.#s,e,!0)}#n=a(null);get promise(){return r(this.#n)}set promise(e){o(this.#n,e)}constructor(e,t,s=()=>!1){this.menu=e,this.run=t,this.disabled=s}}class j{is_menu=!0;menu;depth;#e=a(!1);get selected(){return r(this.#e)}set selected(e){o(this.#e,e,!0)}#t=a([]);get items(){return r(this.#t)}set items(e){o(this.#t,e)}constructor(e,t){this.menu=e,this.depth=t}}class N{is_menu=!0;menu=null;depth=1;#e=a([]);get items(){return r(this.#e)}set items(e){o(this.#e,e)}}class H{layout;has_custom_layout;#e=a(!1);get opened(){return r(this.#e)}set opened(e){o(this.#e,e,!0)}#t=a(0);get x(){return r(this.#t)}set x(e){o(this.#t,e,!0)}#s=a(0);get y(){return r(this.#s)}set y(e){o(this.#s,e,!0)}#n=a([]);get params(){return r(this.#n)}set params(e){o(this.#n,e)}#i=a();get error(){return r(this.#i)}set error(e){o(this.#i,e,!0)}root_menu=new N;#r=a([]);get selections(){return r(this.#r)}set selections(e){o(this.#r,e)}#o=l(()=>this.selections.length>1);get can_collapse(){return r(this.#o)}set can_collapse(e){o(this.#o,e)}#a=l(()=>{const e=this.selections.at(-1);return!!e?.is_menu&&e.items.length>0});get can_expand(){return r(this.#a)}set can_expand(e){o(this.#a,e)}#c=l(()=>(this.selections.at(-1)?.menu??this.root_menu).items.length>1);get can_select_next(){return r(this.#c)}set can_select_next(e){o(this.#c,e)}#l=l(()=>(this.selections.at(-1)?.menu??this.root_menu).items.length>1);get can_select_previous(){return r(this.#l)}set can_select_previous(e){o(this.#l,e)}#u=l(()=>{const e=this.selections.at(-1);return e?e.is_menu?e.items.length>0:!e.disabled():!1});get can_activate(){return r(this.#u)}set can_activate(e){o(this.#u,e)}constructor(e=g){const{layout:t}=e;this.has_custom_layout=!!t,this.layout=t??new v}open(e,t,s){this.selections=[],this.opened=!0,this.x=t,this.y=s,this.params=e}close(){this.opened&&(this.reset_items(this.root_menu.items),this.opened=!1)}reset_items(e){for(const t of e)t.is_menu?this.reset_items(t.items):(t.promise=null,t.pending=!1,t.error_message=null)}activate(e){if(e.is_menu)this.expand_selected();else{if(e.disabled())return!1;let t;try{t=e.run()()}catch(s){const n=typeof s?.message=="string"?s.message:void 0;e.error_message=n??"unknown error",this.error=n}if(E(t)){e.pending=!0,e.error_message=null;const s=e.promise=t.then(n=>{if(s===e.promise){if(typeof n?.ok=="boolean")if(n.ok)n.close!==!1&&this.close();else{const c=typeof n.message=="string"?n.message:void 0;e.error_message=c??"unknown error",this.error=c}else this.close();return n}},n=>{if(s!==e.promise)return;const c=typeof n?.message=="string"?n.message:void 0;e.error_message=c??"unknown error",this.error=c}).finally(()=>{s===e.promise&&(e.pending=!1,e.promise=null)});return e.promise}if(typeof t?.ok=="boolean")if(t.ok)t.close!==!1&&this.close();else{const s=typeof t.message=="string"?t.message:void 0;e.error_message=s??"unknown error",this.error=s}else this.close()}return!0}activate_selected(){const e=this.selections.at(-1);if(e)return this.activate(e);this.select_first()}select(e){if(this.selections.at(-1)===e)return;for(const n of this.selections)n.selected=!1;const t=[];let s=e;do s.selected=!0,t.unshift(s);while((s=s.menu)&&s.menu);this.selections=t}collapse_selected(){if(!this.can_collapse)return;const e=this.selections.at(-1);e.selected=!1,this.selections=this.selections.slice(0,-1)}expand_selected(){if(!this.can_expand)return;const e=this.selections.at(-1);if(!e?.is_menu||!e.items.length)return;const t=e.items[0];t.selected=!0,this.selections=[...this.selections,t]}select_next(){if(!this.selections.length){this.select_first();return}const e=this.selections.at(-1),t=e.menu.items.indexOf(e);this.select(e.menu.items[t===e.menu.items.length-1?0:t+1])}select_previous(){if(!this.selections.length){this.select_last();return}const e=this.selections.at(-1),t=e.menu.items.indexOf(e);this.select(e.menu.items[t===0?e.menu.items.length-1:t-1])}select_first(){const e=this.selections.at(-1)?.menu??this.root_menu;e.items.length&&this.select(e.items[0])}select_last(){const{items:e}=this.selections.at(-1)?.menu??this.root_menu;this.select(e.at(-1))}add_entry(e,t=()=>!1){const s=m.get_maybe()??this.root_menu,n=new O(s,e,t);return s.items=[...s.items,n],_(()=>{s.items=[]}),n}add_submenu(){const e=m.get_maybe()??this.root_menu,t=new j(e,e.depth+1);return e.items=[...e.items,t],m.set(t),_(()=>{e.items=[]}),t}}const h="contextmenu",S=`a,[data-${h}]`,p=new Map;let M=0;const L=i=>e=>{if(i==null)return;let t=e.dataset[h];return t||(t=M+++"",e.dataset[h]=t),p.set(t,i),()=>{p.delete(t)}},A=17,Z=(i,e,t,s,n)=>{const{link_enabled:c=!0,text_enabled:y=!0,separator_enabled:x=!0,vibrate:w=!0}=n??g,f=C(i)?.filter(u=>typeof u=="function"||(u.snippet!=="link"||c)&&(u.snippet!=="text"||y)&&(u.snippet!=="separator"||x));return f?.length?(s.open(f,e,t),w&&navigator.vibrate&&navigator.vibrate(A),!0):!1},C=i=>{let e=null,t=i,s,n;for(;t=t?.closest(S);){if(s=t.dataset[h]){if(e??=[],n=p.get(s),n===void 0)continue;Array.isArray(n)?(e??=[]).push(...n):(e??=[]).push(n)}t.tagName==="A"&&(e??=[]).push({snippet:"link",props:{href:T(t.href)}}),t=t.parentElement}if(e){const c=window.getSelection()?.toString();c&&e.unshift({snippet:"text",props:{content:"copy text",icon:"ðŸ“‹",run:async()=>{await navigator.clipboard.writeText(c)}}})}return e},ee=d(),m=d(),te=d(()=>new v),D="fuz.dev",U="fuz.dev",R="https://github.com/fuzdev/fuz.dev",X="fuzdev",Y="https://www.fuz.dev/",B="https://www.fuz.dev/logo.svg",I="a friendly pixelated spider facing you",P=null,Q=null,q=!1,F={name:"fuz.dev",version:"0.0.1",description:"website for the Fuz stack",motto:"friendly user zystem",glyph:"ðŸ¦‹",logo:"logo.svg",logo_alt:"a friendly pixelated spider facing you",homepage:"https://www.fuz.dev/",repository:"https://github.com/fuzdev/fuz.dev",scripts:{start:"gro dev",dev:"gro dev",build:"gro build",check:"gro check",test:"gro test",preview:"vite preview",deploy:"gro deploy"},type:"module",engines:{node:">=22.15"},devDependencies:{"@fuzdev/fuz_css":"^0.43.0","@fuzdev/fuz_ui":"^0.177.0","@fuzdev/fuz_util":"^0.45.1","@ryanatkn/eslint-config":"^0.9.0","@ryanatkn/gro":"^0.184.0","@sveltejs/adapter-static":"^3.0.10","@sveltejs/kit":"^2.49.1","@sveltejs/vite-plugin-svelte":"^6.2.1",eslint:"^9.39.1","eslint-plugin-svelte":"^3.13.1",prettier:"^3.7.4","prettier-plugin-svelte":"^3.4.1",svelte:"^5.45.6","svelte-check":"^4.3.4",tslib:"^2.8.1",typescript:"^5.9.3","typescript-eslint":"^8.48.1",vitest:"^4.0.15"},prettier:{plugins:["prettier-plugin-svelte"],useTabs:!0,printWidth:100,singleQuote:!0,bracketSpacing:!1,overrides:[{files:"package.json",options:{useTabs:!1}}]},sideEffects:["**/*.css"],files:["dist"]},J={name:"fuz.dev",version:"0.0.1",modules:[]},K={name:D,repo_name:U,repo_url:R,owner_name:X,homepage_url:Y,logo_url:B,logo_alt:I,npm_url:P,changelog_url:Q,published:q,package_json:F,source_json:J},se=K;export{H as C,ee as a,te as b,L as c,Z as d,se as l};
