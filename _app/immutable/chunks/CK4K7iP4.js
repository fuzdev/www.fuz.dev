import{W as o,g as i,J as r,X as u,Y as _}from"./B6ytLU4V.js";import{r as p,t as b}from"./DD-bKEEg.js";const k=l=>l&&typeof l.then=="function",g=Object.freeze({});class v{#e=o(0);get width(){return i(this.#e)}set width(e){r(this.#e,e,!0)}#t=o(0);get height(){return i(this.#t)}set height(e){r(this.#t,e,!0)}}class z{is_menu=!1;menu;run;disabled;#e=o(!1);get selected(){return i(this.#e)}set selected(e){r(this.#e,e,!0)}#t=o(!1);get pending(){return i(this.#t)}set pending(e){r(this.#t,e,!0)}#s=o(null);get error_message(){return i(this.#s)}set error_message(e){r(this.#s,e,!0)}#n=o(null);get promise(){return i(this.#n)}set promise(e){r(this.#n,e)}constructor(e,t,s=()=>!1){this.menu=e,this.run=t,this.disabled=s}}class E{is_menu=!0;menu;depth;#e=o(!1);get selected(){return i(this.#e)}set selected(e){r(this.#e,e,!0)}#t=o([]);get items(){return i(this.#t)}set items(e){r(this.#t,e)}constructor(e,t){this.menu=e,this.depth=t}}class T{is_menu=!0;menu=null;depth=1;#e=o([]);get items(){return i(this.#e)}set items(e){r(this.#e,e)}}class C{layout;has_custom_layout;#e=o(!1);get opened(){return i(this.#e)}set opened(e){r(this.#e,e,!0)}#t=o(0);get x(){return i(this.#t)}set x(e){r(this.#t,e,!0)}#s=o(0);get y(){return i(this.#s)}set y(e){r(this.#s,e,!0)}#n=o([]);get params(){return i(this.#n)}set params(e){r(this.#n,e)}#i=o();get error(){return i(this.#i)}set error(e){r(this.#i,e,!0)}root_menu=new T;#r=o([]);get selections(){return i(this.#r)}set selections(e){r(this.#r,e)}#o=u(()=>this.selections.length>1);get can_collapse(){return i(this.#o)}set can_collapse(e){r(this.#o,e)}#l=u(()=>{const e=this.selections.at(-1);return!!e?.is_menu&&e.items.length>0});get can_expand(){return i(this.#l)}set can_expand(e){r(this.#l,e)}#a=u(()=>(this.selections.at(-1)?.menu??this.root_menu).items.length>1);get can_select_next(){return i(this.#a)}set can_select_next(e){r(this.#a,e)}#u=u(()=>(this.selections.at(-1)?.menu??this.root_menu).items.length>1);get can_select_previous(){return i(this.#u)}set can_select_previous(e){r(this.#u,e)}#c=u(()=>{const e=this.selections.at(-1);return e?e.is_menu?e.items.length>0:!e.disabled():!1});get can_activate(){return i(this.#c)}set can_activate(e){r(this.#c,e)}constructor(e=g){const{layout:t}=e;this.has_custom_layout=!!t,this.layout=t??new v}open(e,t,s){this.selections=[],this.opened=!0,this.x=t,this.y=s,this.params=e}close(){this.opened&&(this.reset_items(this.root_menu.items),this.opened=!1)}reset_items(e){for(const t of e)t.is_menu?this.reset_items(t.items):(t.promise=null,t.pending=!1,t.error_message=null)}activate(e){if(e.is_menu)this.expand_selected();else{if(e.disabled())return!1;let t;try{t=e.run()()}catch(s){const n=typeof s?.message=="string"?s.message:void 0;e.error_message=n??"unknown error",this.error=n}if(k(t)){e.pending=!0,e.error_message=null;const s=e.promise=t.then(n=>{if(s===e.promise){if(typeof n?.ok=="boolean")if(n.ok)n.close!==!1&&this.close();else{const a=typeof n.message=="string"?n.message:void 0;e.error_message=a??"unknown error",this.error=a}else this.close();return n}},n=>{if(s!==e.promise)return;const a=typeof n?.message=="string"?n.message:void 0;e.error_message=a??"unknown error",this.error=a}).finally(()=>{s===e.promise&&(e.pending=!1,e.promise=null)});return e.promise}if(typeof t?.ok=="boolean")if(t.ok)t.close!==!1&&this.close();else{const s=typeof t.message=="string"?t.message:void 0;e.error_message=s??"unknown error",this.error=s}else this.close()}return!0}activate_selected(){const e=this.selections.at(-1);if(e)return this.activate(e);this.select_first()}select(e){if(this.selections.at(-1)===e)return;for(const n of this.selections)n.selected=!1;const t=[];let s=e;do s.selected=!0,t.unshift(s);while((s=s.menu)&&s.menu);this.selections=t}collapse_selected(){if(!this.can_collapse)return;const e=this.selections.at(-1);e.selected=!1,this.selections=this.selections.slice(0,-1)}expand_selected(){if(!this.can_expand)return;const e=this.selections.at(-1);if(!e?.is_menu||!e.items.length)return;const t=e.items[0];t.selected=!0,this.selections=[...this.selections,t]}select_next(){if(!this.selections.length){this.select_first();return}const e=this.selections.at(-1),t=e.menu.items.indexOf(e);this.select(e.menu.items[t===e.menu.items.length-1?0:t+1])}select_previous(){if(!this.selections.length){this.select_last();return}const e=this.selections.at(-1),t=e.menu.items.indexOf(e);this.select(e.menu.items[t===0?e.menu.items.length-1:t-1])}select_first(){const e=this.selections.at(-1)?.menu??this.root_menu;e.items.length&&this.select(e.items[0])}select_last(){const{items:e}=this.selections.at(-1)?.menu??this.root_menu;this.select(e.at(-1))}add_entry(e,t=()=>!1){const s=m.get_maybe()??this.root_menu,n=new z(s,e,t);return s.items=[...s.items,n],_(()=>{s.items=[]}),n}add_submenu(){const e=m.get_maybe()??this.root_menu,t=new E(e,e.depth+1);return e.items=[...e.items,t],m.set(t),_(()=>{e.items=[]}),t}}const h="contextmenu",O=`a,[data-${h}]`,d=new Map;let N=0;const D=l=>e=>{if(l==null)return;let t=e.dataset[h];return t||(t=N+++"",e.dataset[h]=t),d.set(t,l),()=>{d.delete(t)}},S=17,U=(l,e,t,s,n)=>{const{link_enabled:a=!0,text_enabled:w=!0,separator_enabled:y=!0,vibrate:x=!0}=n??g,f=j(l)?.filter(c=>typeof c=="function"||(c.snippet!=="link"||a)&&(c.snippet!=="text"||w)&&(c.snippet!=="separator"||y));return f?.length?(s.open(f,e,t),x&&navigator.vibrate&&navigator.vibrate(S),!0):!1},j=l=>{let e=null,t=l,s,n;for(;t=t?.closest(O);){if(s=t.dataset[h]){if(e??=[],n=d.get(s),n===void 0)continue;Array.isArray(n)?(e??=[]).push(...n):(e??=[]).push(n)}t.tagName==="A"&&(e??=[]).push({snippet:"link",props:{href:b(t.href)}}),t=t.parentElement}if(e){const a=window.getSelection()?.toString();a&&e.unshift({snippet:"text",props:{content:"copy text",icon:"ðŸ“‹",run:async()=>{await navigator.clipboard.writeText(a)}}})}return e},R=p(),m=p(),X=p(()=>new v),Y={package_json:{name:"www.fuz.dev",version:"0.0.1",description:"website for the Fuz stack",motto:"friendly user zystem",glyph:"ðŸ¦‹",logo:"logo.svg",logo_alt:"a friendly pixelated spider facing you",public:!0,homepage:"https://www.fuz.dev/",repository:"https://github.com/fuzdev/www.fuz.dev",scripts:{start:"gro dev",dev:"gro dev",build:"gro build",check:"gro check",test:"gro test",preview:"vite preview",deploy:"gro deploy"},type:"module",engines:{node:">=22.15"},devDependencies:{"@fuzdev/fuz_css":"^0.42.1","@fuzdev/fuz_ui":"^0.172.0","@fuzdev/fuz_util":"^0.42.0","@ryanatkn/eslint-config":"^0.9.0","@ryanatkn/gro":"^0.181.0","@sveltejs/adapter-static":"^3.0.10","@sveltejs/kit":"^2.49.1","@sveltejs/vite-plugin-svelte":"^6.2.1",eslint:"^9.39.1","eslint-plugin-svelte":"^3.13.1",prettier:"^3.6.2","prettier-plugin-svelte":"^3.4.0",svelte:"^5.45.6","svelte-check":"^4.3.4",tslib:"^2.8.1",typescript:"^5.9.3","typescript-eslint":"^8.48.1",vitest:"^4.0.15"},prettier:{plugins:["prettier-plugin-svelte"],useTabs:!0,printWidth:100,singleQuote:!0,bracketSpacing:!1,overrides:[{files:"package.json",options:{useTabs:!1}}]},sideEffects:["**/*.css"],files:["dist"]},source_json:{name:"www.fuz.dev",version:"0.0.1",modules:[]},name:"www.fuz.dev",repo_name:"www.fuz.dev",repo_url:"https://github.com/fuzdev/www.fuz.dev",owner_name:"fuzdev",homepage_url:"https://www.fuz.dev/",logo_url:"https://www.fuz.dev/logo.svg",logo_alt:"a friendly pixelated spider facing you",npm_url:null,changelog_url:null,published:!1};export{C,R as a,X as b,D as c,U as d,Y as l};
